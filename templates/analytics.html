{% extends "base.html" %}
{% block title %}Analytics Dashboard{% endblock %}

{% block content %}
<div class="analytics-dashboard fade-in">
  <h2 class="dashboard-title">Analytics Dashboard</h2>
  
  <!-- Summary Cards -->
  <div class="dashboard-summary">
    <div class="summary-card card">
      <h3>Total Scans</h3>
      <p>{{ total_scans }}</p>
    </div>
    <div class="summary-card card">
      <h3>Active Users</h3>
      <p>{{ active_users }}</p>
    </div>
    <div class="summary-card card">
      <h3>Average Match</h3>
      <p>{{ avg_similarity }}%</p>
    </div>
  </div>
  
  <!-- Daily Scans Chart -->
  <div class="dashboard-chart card">
    <h3>Daily Scans</h3>
    <canvas id="dailyScansChart" data-scans='{{ daily_scans|tojson }}'></canvas>
  </div>
  
  <!-- Tables Section -->
  <div class="dashboard-tables">
    <div class="table-card card">
      <h3>Top Users by Scan Count</h3>
      <div class="responsive-table">
        <table class="data-table">
          <thead>
            <tr>
              <th>User</th>
              <th>Scan Count</th>
            </tr>
          </thead>
          <tbody>
            {% for user in top_users %}
            <tr>
              <td>{{ user.name }}</td>
              <td>{{ user.scan_count }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="table-card card">
      <h3>Users with Lowest Credits</h3>
      <div class="responsive-table">
        <table class="data-table">
          <thead>
            <tr>
              <th>User</th>
              <th>Credits</th>
            </tr>
          </thead>
          <tbody>
            {% for user in low_credits %}
            <tr>
              <td>{{ user.name }}</td>
              <td>{{ user.credits }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
